# BakaRay é¡¹ç›®å¼€å‘è¿›åº¦æ–‡æ¡£

> æœ€åæ›´æ–°: 2025-12-24

## é¡¹ç›®æ¦‚è¿°
BakaRay æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†è½¬å‘è§„åˆ™çš„é¢æ¿ç³»ç»Ÿï¼Œæ”¯æŒ gostã€iptables ç­‰åè®®ã€‚

## å½“å‰çŠ¶æ€

### å·²å®Œæˆ âœ…
- [x] é¡¹ç›®åŸºç¡€ç»“æ„æ­å»º
- [x] æ•°æ®åº“æ¨¡å‹å®šä¹‰ (models/)
- [x] é…ç½®æ–‡ä»¶åŠ è½½ (config/)
- [x] æ•°æ®åº“è¿æ¥ (repository/)
- [x] JWT è®¤è¯ä¸­é—´ä»¶ (middleware/)
- [x] åŸºç¡€è·¯ç”±æ¡†æ¶ (routes/)
- [x] ä¸»ç¨‹åºå…¥å£ (cmd/server/main.go)
- [x] **ç”¨æˆ·æœåŠ¡å®Œå–„** - ä½¿ç”¨ bcrypt å¯†ç å“ˆå¸Œ
- [x] **èŠ‚ç‚¹å¤„ç†å™¨å’ŒæœåŠ¡** - èŠ‚ç‚¹åˆ—è¡¨/è¯¦æƒ…/å¿ƒè·³/é…ç½®/ä¸ŠæŠ¥
- [x] **è§„åˆ™å¤„ç†å™¨å’ŒæœåŠ¡** - è§„åˆ™ CRUD
- [x] **æ”¯ä»˜å¤„ç†å™¨å’ŒæœåŠ¡** - å¥—é¤/è®¢å•/å……å€¼
- [x] **ç”¨æˆ·å¤„ç†å™¨** - ä¸ªäººä¿¡æ¯/æµé‡ç»Ÿè®¡
- [x] **ç®¡ç†å‘˜å¤„ç†å™¨** - èŠ‚ç‚¹/ç”¨æˆ·/è®¢å•/å¥—é¤ç®¡ç†
- [x] èŠ‚ç‚¹ä¸ŠæŠ¥åŠŸèƒ½
- [x] ä»£ç ç¼–è¯‘éªŒè¯é€šè¿‡
- [x] **å‰ç«¯é¡¹ç›®** - React + Vite å‰ç«¯ç•Œé¢
- [x] **è®¤è¯æ¨¡å—** - ç™»å½•/æ³¨å†Œé¡µé¢
- [x] **ç”¨æˆ·ä»ªè¡¨ç›˜** - ä¸ªäººä¿¡æ¯/æµé‡ç»Ÿè®¡
- [x] **èŠ‚ç‚¹ç®¡ç†** - èŠ‚ç‚¹åˆ—è¡¨å±•ç¤º
- [x] **è§„åˆ™ç®¡ç†** - è½¬å‘è§„åˆ™ CRUD
- [x] **å¥—é¤è´­ä¹°** - å¥—é¤å±•ç¤ºå’Œè´­ä¹°
- [x] **è®¢å•ç®¡ç†** - è®¢å•åˆ—è¡¨
- [x] **ç®¡ç†åå°** - èŠ‚ç‚¹/ç”¨æˆ·/å¥—é¤/è®¢å•ç®¡ç†

### å¾…å®ç°/å¾…å®Œå–„ ğŸ”„
- [x] AuthHandler Refresh åŠŸèƒ½å®Œå–„
- [x] æµé‡ç»Ÿè®¡ API å®Œæ•´å®ç°ï¼ˆæ”¯æŒèŠ‚ç‚¹ä¸ŠæŠ¥å¢é‡ç»Ÿè®¡ï¼‰
- [x] æ”¯ä»˜å›è°ƒå¤„ç†å®Œå–„ï¼ˆæ”¯æŒ GET/POSTï¼ŒæŒ‰å¥—é¤å‘æ”¾æµé‡ï¼‰
- [x] gost/iptables é…ç½®ç”Ÿæˆï¼ˆèŠ‚ç‚¹é…ç½®ä¸‹å‘åŒ…å« targets ä¸åè®®é…ç½®ï¼‰
- [x] èŠ‚ç‚¹ç»„/ç”¨æˆ·ç»„ç®¡ç†

---

## æ¨¡å—çŠ¶æ€è¯¦æƒ…

### Handlers
| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| AuthHandler | âœ… å®Œæˆ | ç™»å½•/æ³¨å†Œ/Refresh å®Œæˆ |
| UserHandler | âœ… å®Œæˆ | GetProfile/UpdateProfile/GetTrafficStats |
| NodeHandler | âœ… å®Œæˆ | å¿ƒè·³/é…ç½®/ä¸ŠæŠ¥/æ¢é’ˆæ•°æ® |
| RuleHandler | âœ… å®Œæˆ | è§„åˆ™ CRUD/ç›®æ ‡/Gost/IPTables é…ç½® |
| PaymentHandler | âœ… å®Œæˆ | å¥—é¤/è®¢å•/å……å€¼/å›è°ƒ |
| AdminHandler | âœ… å®Œæˆ | èŠ‚ç‚¹/ç”¨æˆ·/è®¢å•/å¥—é¤ç®¡ç† |

### Services
| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| UserService | âœ… å®Œæˆ | bcrypt å¯†ç å“ˆå¸Œ/ç”¨æˆ· CRUD |
| NodeService | âœ… å®Œæˆ | èŠ‚ç‚¹ CRUD/æ¢é’ˆæ•°æ®/è§„åˆ™å…³è” |
| RuleService | âœ… å®Œæˆ | è§„åˆ™ CRUD/æµé‡ç»Ÿè®¡ |
| PaymentService | âœ… å®Œæˆ | å¥—é¤/è®¢å•/æ”¯ä»˜é…ç½® |

### Frontend Pages
| é¡µé¢ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| Login/Register | âœ… å®Œæˆ | ç”¨æˆ·è®¤è¯é¡µé¢ |
| Dashboard | âœ… å®Œæˆ | ç”¨æˆ·ä»ªè¡¨ç›˜ |
| Nodes | âœ… å®Œæˆ | èŠ‚ç‚¹åˆ—è¡¨ |
| Rules | âœ… å®Œæˆ | è§„åˆ™ç®¡ç† |
| Packages | âœ… å®Œæˆ | å¥—é¤è´­ä¹° |
| Orders | âœ… å®Œæˆ | è®¢å•åˆ—è¡¨ |
| Admin Dashboard | âœ… å®Œæˆ | ç®¡ç†åå°æ¦‚è§ˆ |
| Admin Nodes | âœ… å®Œæˆ | èŠ‚ç‚¹ç®¡ç† |
| Admin Users | âœ… å®Œæˆ | ç”¨æˆ·ç®¡ç† |
| Admin Packages | âœ… å®Œæˆ | å¥—é¤ç®¡ç† |
| Admin Orders | âœ… å®Œæˆ | è®¢å•ç®¡ç† |

---

## ç¯å¢ƒé…ç½®

### åç«¯ä¾èµ–
- Go 1.25+
- MySQL/PostgreSQL
- Redis

### å‰ç«¯ä¾èµ–
- Node.js 18+
- Vue 3+
- Vite 6+
- Vue Router 4
- Pinia
- Vuetify 3
- Axios

### é…ç½®æ–¹å¼
é€šè¿‡ `config.yaml` æˆ–ç¯å¢ƒå˜é‡é…ç½®

---

## è¿è¡Œæ–¹å¼

### åç«¯
```bash
# å¼€å‘æ¨¡å¼
go run cmd/server/main.go

# æ„å»º
go build -o bakaray cmd/server/main.go

# Docker
docker-compose up -d
```

### å‰ç«¯
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å¼€å‘æ¨¡å¼ (ç«¯å£ 3000)
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview
```

### Nginx éƒ¨ç½²é…ç½®
```nginx
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    root /var/www/bakaray/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # API ä»£ç†
    location /api {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## æœ¬æ¬¡æ›´æ–°å†…å®¹

### å‰ç«¯å¼€å‘
1. **é¡¹ç›®åˆå§‹åŒ–**
   - åˆ›å»º Vue 3 + Vite é¡¹ç›®
   - é…ç½® Vuetify 3 ç»„ä»¶åº“
   - é…ç½®å¼€å‘æœåŠ¡å™¨ä»£ç†

2. **API å±‚**
   - axios å®ä¾‹é…ç½®ï¼ˆè‡ªåŠ¨æºå¸¦ tokenï¼‰
   - å„æ¨¡å— API æ¥å£å°è£…

3. **çŠ¶æ€ç®¡ç†**
   - AuthContext ç”¨æˆ·è®¤è¯çŠ¶æ€

4. **é¡µé¢å¼€å‘**
   - Login/Register ç™»å½•æ³¨å†Œ
   - Dashboard ä»ªè¡¨ç›˜
   - Nodes èŠ‚ç‚¹åˆ—è¡¨
   - Rules è§„åˆ™ç®¡ç†
   - Packages å¥—é¤è´­ä¹°
   - Orders è®¢å•åˆ—è¡¨
   - Admin ç®¡ç†åå°ï¼ˆèŠ‚ç‚¹/ç”¨æˆ·/å¥—é¤/è®¢å•ï¼‰

5. **ç»„ä»¶**
   - Layout å¸ƒå±€ç»„ä»¶ï¼ˆä¾§è¾¹æ å¯¼èˆªï¼‰
   - é€šç”¨ Modal å¼¹çª—
   - è¡¨æ ¼ç»„ä»¶

### æ ·å¼
- ç»Ÿä¸€çš„ç´«è‰²æ¸å˜ä¸»é¢˜
- å“åº”å¼å¸ƒå±€è®¾è®¡
- ç°ä»£åŒ– UI ç»„ä»¶
